<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Java Calculator</title>
    <style>
    

        table {
            background-color: lightgrey;
        }
    
        td {
            padding: 5px;
        }

        .clear {
            background-color: red;
            color: white;
            width: 100%;
        }
 
        table {
            background-color: blue;
            border-radius: 5px;
            padding: 10px 5px 5px 5px;
        }

        button {
            width: 100%;
            height: 100%;
            border-radius: 5px;
            padding: 20px;
            font-size: 20px;
            background-color: lightblue;
        }

        div {
            background-color: grey;
            height: 30px;
            text-align: right;
            font-size: 40px;
            border-radius: 5px;
            padding: 10px;
            
        }

        .div, .mul, .sub, .add {
            background-color: orange;
            
        }     
   
        .equal {
            background-color: lightgreen;
        }

    </style>
</head>
<body>

    <table class="calculator">
        <tr>
            <td colspan="4"><div id="display" class="display">0</div></td>
        </tr>
        <tr>
            <td colspan="3"><button class="clear" onclick="clearDisplay()">Clear</button></td>
            <td><button class="div op" onclick="divideButtonClicked()">÷</button></td>
        </tr>
        <tr>
            <td><button class="num" onclick="numberButtonClicked(this.innerText)">7</button></td>
            <td><button class="num" onclick="numberButtonClicked(this.innerText)">8</button></td>
            <td><button class="num" onclick="numberButtonClicked(this.innerText)">9</button></td>
            <td><button class="mul op" onclick="multiplyButtonClicked()">x</button></td>
        </tr>
        <tr>
            <td><button class="num" onclick="numberButtonClicked(this.innerText)">4</button></td>
            <td><button class="num" onclick="numberButtonClicked(this.innerText)">5</button></td>
            <td><button class="num" onclick="numberButtonClicked(this.innerText)">6</button></td>
            <td><button class="sub op" onclick="subButtonClicked()">-</button></td>
        </tr>
        <tr>
            <td><button class="num" onclick="numberButtonClicked(this.innerText)">1</button></td>
            <td><button class="num" onclick="numberButtonClicked(this.innerText)">2</button></td>
            <td><button class="num" onclick="numberButtonClicked(this.innerText)">3</button></td>
            <td><button class="add op" onclick="addButtonClicked()">+</button></td>
        </tr>
        <tr>
            <td colspan="2"><button class="num" onclick="numberButtonClicked(this.innerText)">0</button></td>
            <td><button class="point" onclick="pointButtonClicked()">.</button></td>
            <td><button class="eq" onclick="equalResults()">=</button></td>
        </tr>
    </table>

    <script>

        var display = document.getElementById('display');

        let isDecimal = false;

        let displayArray = [];

        var operator;

        var total = 0;

        var arrayIndex = 0;

        function isClear() {
            return display.innerText === '0';
        }

        function clearDisplay() {
            display.innerText = '0';

            isDecimal = false;

            displayArray = [];
            numIndex = 0;
        }

        function numberButtonClicked(n) {
            const currentText = display.innerText;
            
            if ( isClear() ) {
                display.innerText = n;
                displayArray[numIndex] = n;
                numIndex+=1;
            } else {
                display.innerText = display.innerText + n;
                displayArray[numIndex] = n;
                numIndex+=1;
            }

        }

        function pointButtonClicked() {

            // Prevent the user from enter multiple points
            if ( ! isDecimal ) {
                display.innerText = display.innerText + '.';
            }
            isDecimal = true;
        }



        // First operator click stores first value in total variable, then changes operator variable.
        // Next operators clicked uses operator variable to apply calculation to total variable.

        // Tests 35, 36, 38, 39 should pass but say they don't. Don't understand some of the tests
        // like test 40 which says 1 + 2 = should display 8. Are these supposed to fail? 

        function addButtonClicked() { // All operator functions except "=" are the same. They just change the operator to whatever the operation is.
            if (total == 0) {
                total += parseFloat(display.innerText); // Stores the first value in the display into the variable total after an operator is pushed.
            }
            if (operator == '+' & display.innerText != "") { // Changes total depending on the operator. Will skip and just change operator if an operator is pushed and 
                total += parseFloat(display.innerText); // there's nothing in the display.
            }
            if (operator == '-' & display.innerText != "") {                      
                total -= parseFloat(display.innerText); 
            }
            if (operator == '÷' & display.innerText != "") {     
                total /= parseFloat(display.innerText);
            }
            if (operator == '*' & display.innerText != "") {    
                total *= parseFloat(display.innerText);
            }
            operator = '+'; // Operator changes at end so the calculation to total occurs first
            display.innerText = ""; // Clears display
        }
            
        function subButtonClicked() {
            if (total == 0) {
                total += parseFloat(display.innerText);
            }
            if (operator == '-' & display.innerText != "") {                      
                total -= parseFloat(display.innerText); 
            }
            if (operator == '+' & display.innerText != "") {
                total += parseFloat(display.innerText);
            }
            if (operator == '÷' & display.innerText != "") {     
                total /= parseFloat(display.innerText);
            }
            if (operator == '*' & display.innerText != "") {     
                total *= parseFloat(display.innerText);
            }
            operator = '-';   
            display.innerText = "";
        }
        


        function multiplyButtonClicked() { 
            if (total == 0) {     
                total += parseFloat(display.innerText); 
            }
            if (operator == '-' & display.innerText != "") {
                total -= parseFloat(display.innerText);
            }
            if (operator == '+' & display.innerText != "") {     
                total += parseFloat(display.innerText);
            }
            if (operator == '÷' & display.innerText != "") {     
                total /= parseFloat(display.innerText);
            }
            if (operator == '*' & display.innerText != "") {     
                total *= parseFloat(display.innerText);
            }
            operator = '*';
            display.innerText = "";
        }

        function divideButtonClicked() {
            if (total == 0) { 
                total += parseFloat(display.innerText);
            }
            if (operator == '-' & display.innerText != "") {
                total -= parseFloat(display.innerText);
            }
            if (operator == '+' & display.innerText != "") {     
                total += parseFloat(display.innerText);
            }
            if (operator == '*' & display.innerText != "") {    
                total *= parseFloat(display.innerText);  
            }
            if (operator == '÷' & display.innerText != "") {     
                total /= parseFloat(display.innerText);
            }
            operator = '÷'; 
            display.innerText = "";
        }                        

        function equalResults() { // Performs the last operation to total, then displays total.
            if (operator == '+' & display.innerText != "") {
                total += parseFloat(display.innerText);
                display.innerText = total;
            }
            else if (operator == '-' & display.innerText != "") {
                total -= parseFloat(display.innerText);
                display.innerText = total;
            } 
            else if (operator == '*' & display.innerText != "") {
                total *= parseFloat(display.innerText);
                display.innerText = total;
            }
            else if (operator == '÷' & display.innerText != "") {
                total /= parseFloat(display.innerText);
                display.innerText = total;
            }
            else { // Handles 1 + = so it equals 1.
                display.innerText = total;
            }
        }
    </script>
    <script src="lab4-tester.js"></script> 
</body>
</html>